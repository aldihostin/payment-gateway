<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status Pembayaran - QRIS Gateway</title>
    <link rel="stylesheet" href="style/style.css">
    <link rel="icon" href="https://files.catbox.moe/tsn2ke.jpg" type="image/jpeg">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="bg-shape shape-1"></div>
        <div class="bg-shape shape-2"></div>
        <div class="bg-shape shape-3"></div>
        <div class="bg-shape shape-4"></div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-brand">
                <div class="brand-icon">
                    <i class="fas fa-qrcode"></i>
                </div>
                <div class="brand-info">
                    <h1>Status Pembayaran</h1>
                    <span>Scan QR Code untuk Membayar</span>
                </div>
            </div>
            <div class="security-badge">
                <i class="fas fa-shield-check"></i>
                <span>Secure</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Loading Section -->
            <section id="loadingSection" class="section-card">
                <div class="loading-content">
                    <div class="loading-spinner-large"></div>
                    <h3>Memuat Status Pembayaran...</h3>
                    <p>Mohon tunggu sebentar</p>
                </div>
            </section>

            <!-- Payment Status Section -->
            <section id="statusSection" class="section-card hidden">
                <!-- Status Header -->
                <div class="status-header">
                    <div class="status-title">
                        <h2>Status Pembayaran</h2>
                        <div id="statusBadge" class="status-badge"></div>
                    </div>
                    <div class="transaction-info">
                        <div class="transaction-id">
                            <span class="label">ID Transaksi:</span>
                            <div class="id-container">
                                <code id="transactionId"></code>
                                <button class="copy-id-btn" onclick="copyTransactionId()" title="Copy ID">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Info -->
                <div class="payment-info">
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="info-content">
                            <span class="info-label">Jumlah</span>
                            <span class="info-value" id="paymentAmount"></span>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="info-content">
                            <span class="info-label">Berlaku Hingga</span>
                            <span class="info-value" id="paymentExpiry"></span>
                        </div>
                    </div>
                </div>

                <!-- Countdown Timer -->
                <div id="countdownSection" class="countdown-section">
                    <div class="countdown-header">
                        <i class="fas fa-hourglass-half"></i>
                        <span>Sisa Waktu Pembayaran</span>
                    </div>
                    <div class="countdown-display">
                        <div class="time-unit">
                            <span class="time-value" id="minutes">05</span>
                            <span class="time-label">Menit</span>
                        </div>
                        <div class="time-separator">:</div>
                        <div class="time-unit">
                            <span class="time-value" id="seconds">00</span>
                            <span class="time-label">Detik</span>
                        </div>
                    </div>
                    <div class="countdown-progress">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <!-- QRIS Code Display -->
                <div id="qrisSection" class="qris-section-bottom">
                    <div class="qris-header-bottom">
                        <h3><i class="fas fa-qrcode"></i> Scan QR Code untuk Membayar</h3>
                        <p>Gunakan aplikasi e-wallet atau mobile banking Anda</p>
                    </div>
                    
                    <div class="qris-container-bottom">
                        <!-- QRIS Frame with Loading and Image -->
                        <div class="qris-frame-bottom">
                            <!-- Loading State -->
                            <div id="qrisLoading" class="qris-loading">
                                <div class="qr-skeleton"></div>
                                <span>Memuat QR Code...</span>
                            </div>
                            
                            <!-- QRIS Image -->
                            <img id="qrisImage" class="qris-image-bottom hidden" alt="QRIS Payment Code" style="display: none;">
                        </div>
                        
                        <!-- Supported Apps -->
                        <div class="supported-apps-bottom">
                            <span class="apps-label">Didukung oleh:</span>
                            <div class="apps-icons">
                                <div class="app-icon" title="GoPay"><i class="fas fa-mobile-alt"></i></div>
                                <div class="app-icon" title="OVO"><i class="fas fa-wallet"></i></div>
                                <div class="app-icon" title="DANA"><i class="fas fa-credit-card"></i></div>
                                <div class="app-icon" title="ShopeePay"><i class="fas fa-shopping-bag"></i></div>
                                <div class="app-icon" title="Bank"><i class="fas fa-university"></i></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Success Section -->
                <div id="successSection" class="success-section hidden">
                    <div class="success-animation">
                        <div class="success-checkmark">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="success-ripple"></div>
                    </div>
                    <div class="success-content">
                        <h3>Pembayaran Berhasil!</h3>
                        <p>Transaksi Anda telah berhasil diproses</p>
                        <div class="success-details">
                            <div class="detail-row">
                                <span>Dibayar pada:</span>
                                <span id="paidTime"></span>
                            </div>
                            <div class="detail-row">
                                <span>Metode:</span>
                                <span>QRIS</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error/Status Messages -->
                <div id="messageSection" class="message-section hidden">
                    <div class="message-icon" id="messageIcon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="message-content">
                        <h4 id="messageTitle"></h4>
                        <p id="messageText"></p>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button id="cancelBtn" class="action-btn cancel-btn">
                        <i class="fas fa-times"></i>
                        <span>Batalkan</span>
                    </button>
                    <button id="newPaymentBtn" class="action-btn primary-btn hidden">
                        <i class="fas fa-plus"></i>
                        <span>Pembayaran Baru</span>
                    </button>
                </div>
            </section>

            <!-- Error Section -->
            <section id="errorSection" class="section-card hidden">
                <div class="error-content">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>Transaksi Tidak Ditemukan</h3>
                    <p>ID transaksi tidak valid atau telah kedaluwarsa</p>
                    <button onclick="window.location.href='/'" class="action-btn primary-btn">
                        <i class="fas fa-home"></i>
                        <span>Kembali ke Beranda</span>
                    </button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <div class="footer-brand">
                    <p>&copy; 2025 QRIS Gateway</p>
                    <p>Powered by <a href="https://wa.me/6281235807940" target="_blank">@krsna_081</a></p>
                </div>
                <div class="footer-links">
                    <a href="https://whatsapp.com/channel/0029VaOQ0f3BA1f7HHV9DV1J" target="_blank" class="footer-link">
                        <i class="fab fa-whatsapp"></i>
                        <span>Channel</span>
                    </a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="style/status.js"></script>
</body>
</html>
